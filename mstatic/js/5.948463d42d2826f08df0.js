webpackJsonp([5],{"2NaQ":function(t,i){},"9mnt":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("hcrA"),n=e.n(a),s=e("Xgv0"),l=e("zf2T"),o=new s.a,r={name:"liquidity",data:function(){return{minAddLiquidity:"",margin:"--",address:"",basesymbol:"--",balance:"--",symbol:"--",unlock:!1,my_liquidity:"--",liquidity_margin:"",liquidity_volume:"",total_liquidity:"--",PerLiquidityShare:"--",connectbtn:!0,maxRemovableShares:"",id:0,removeallt:!1,wrong:"",network:""}},watch:{margin:{handler:function(t,i){}}},mounted:function(){this.id=this.$route.params.id,this.network=this.$route.params.network,console.log(this.network),this.connectwallet()},methods:{reset:function(){this.getWalletBalance(),this.getSpecification(),this.getLiquidityInfo(),this.getLiquidityInfo(),this.liquidity_margin="",this.liquidity_volume=""},getSpecification:function(){var t=this;o.getSpecification().then(function(i){t.symbol=i.bSymbol})},getLiquidityInfo:function(){var t=this;o.getLiquidityInfo().then(function(i){var e=+i.poolLiquidity,a=+i.shares;t.PerLiquidityShare=i.shareValue,t.my_liquidity=a.toFixed(2),t.total_liquidity=e.toFixed(2),t.maxRemovableShares=i.maxRemovableShares})},connectwallet:function(){var t=this,i=+this.id;o.connectWallet().then(function(e){e.success?o.initialize(i,t.network).then(function(){t.connectbtn=!1;var i=o.account;i=i.slice(0,6)+"***"+i.slice(i.length-4,i.length),t.address=i,t.network=o.chanId,ethereum.networkVersion!=t.network&&(t.wrong="(Wrong Network!)"),t.isUnlock(),t.getWalletBalance(),t.getSpecification(),t.getLiquidityInfo(),t.getLiquidityInfo()}):alert(e.error)}).catch(function(t){alert("Cannot connect wallet")})},getWalletBalance:function(){var t=this;o.getWalletBalance().then(function(i){var e=+i;t.balance=e.toFixed(2)}).catch(function(t){})},removeall:function(){var t=this,i=n()("#removeLiquidityButton"),e=this.maxRemovableShares;this.disableButton(i),console.log(e),o.removeLiquidity(e).then(function(e){t.enableButton(i),t.reset()}),n()("#confrim").modal("hide")},removeLiquidity:function(){var t=this,i=n()("#removeLiquidityButton"),e=this.liquidity_volume,a=+this.maxRemovableShares;if(this.address)if(+e>a)alert("The input liquidity cannot exceed  "+a);else if(+e<=0||isNaN(e))alert("Invalid Liquidity!");else{if(new l.a(a).minus(new l.a(e)).abs().lte(new l.a(100))){if(n()("#confrim").modal("show"),n()(".all").text("Want to remove all ("+a+" shares)?"),!this.removeallt)return;e=a}this.disableButton(i),o.removeLiquidity(e).then(function(e){if(!e.success)return t.enableButton(i),t.reset(),void alert("failure of transaction");t.enableButton(i),t.reset()})}else alert("Please Connect MetaMask wallet first!")},addLiquidity:function(){var t=this,i=n()("#addLiquidityButton");this.address?o.getSpecification().then(function(e){t.minAddLiquidity=e.minAddLiquidity;var a=t.liquidity_margin;+a>t.balance?alert("not sufficient funds"):+a<+t.minAddLiquidity?alert("The input liquidity shall not be less than "+t.minAddLiquidity):+a<=0||isNaN(a)?alert("Please enter the correct format!"):(t.disableButton(i),o.addLiquidity(a).then(function(e){if(!e.success)return t.enableButton(i),t.reset(),void alert("failure of transaction");t.enableButton(i),t.reset()}))}):alert("Please Connect MetaMask wallet first!")},disableButton:function(t){t.find("span.spinner").show(),t.attr("disabled",!0)},enableButton:function(t){t.find("span.spinner").hide(),t.attr("disabled",!1)},authorization:function(){var t=this,i=n()("#Unlock");this.disableButton(i),o.unlock().then(function(e){t.enableButton(i),t.isUnlock()}).catch(function(t){})},isUnlock:function(){var t=this;o.isUnlocked().then(function(i){i?(n()("input").attr("disabled",!1),n()(".input-group-text").css({background:"#fff"}),t.unlock=!0):(n()("input").attr("disabled",!0),n()(".input-group-text").css({background:"#E9ECEF"}),t.unlock=!1)}).catch(function(t){})}}},c={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"liquiditybox"}},[e("div",{staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog",id:"confrim"}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("\n            Cancel\n          ")]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"button",id:"removeall"},on:{click:t.removeall}},[t._v("\n            OK\n          ")])])])])]),t._v(" "),e("div",{staticClass:"nav"},[t._m(1),t._v(" "),e("div",[t.connectbtn?e("button",{staticClass:"connect br10-rem",attrs:{type:"button",id:"connect-wallet"},on:{click:t.connectwallet}},[t._v("\n        Connect wallet\n      ")]):t._e(),t._v(" "),e("span",{staticClass:"id",staticStyle:{color:"#fff"}},[t._v(t._s(t.address))]),t._v(" "),e("br"),t._v(" "),e("span",{staticStyle:{color:"red"},attrs:{id:"wrong"}},[t._v(t._s(t.wrong))])])]),t._v(" "),e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row justify-content-center",staticStyle:{background:"#19202b","margin-top":"29px","margin-left":"0","margin-right":"0"}},[e("div",{staticClass:"mt-2 fcw",attrs:{role:"tabpanel",id:"liquidity"}},[e("div",{staticClass:"left"},[e("div",{staticClass:"text-mute"},[t._v("\n            Wallet Balance:\n            "),e("span",{staticClass:"text-mute",attrs:{id:"my-balance"}},[t._v(t._s(t.balance))]),t._v(" "),e("span",{staticClass:"text-mute symbol"},[t._v(t._s(t.symbol))])]),t._v(" "),e("div",{staticClass:"input-group mb-3 mt-4"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.liquidity_margin,expression:"liquidity_margin"}],staticClass:"form-control",staticStyle:{color:"black"},attrs:{type:"text",placeholder:"liquidity vloume","aria-label":"liquidity-margin","aria-describedby":"liquidity-margin",id:"liquidity-margin",disabled:"disabled"},domProps:{value:t.liquidity_margin},on:{input:function(i){i.target.composing||(t.liquidity_margin=i.target.value)}}}),t._v(" "),e("div",{staticClass:"input-group-append"},[e("span",{staticClass:"input-group-text symbol",staticStyle:{background:"#e9ecef"}},[t._v(t._s(t.symbol))])]),t._v(" "),e("div",{staticClass:"w-100 mt-4 mb-2"},[[t.unlock?e("button",{staticClass:"add",attrs:{type:"button",id:"addLiquidityButton"},on:{click:t.addLiquidity}},[e("span",{staticClass:"spinner spinner-border spinner-border-sm",staticStyle:{display:"none"},attrs:{role:"status","aria-hidden":"true"}}),t._v("\n                  ADD LIQUIDITY\n                ")]):e("button",{staticClass:"add",attrs:{type:"button",id:"Unlock"},on:{click:t.authorization}},[e("span",{staticClass:"spinner spinner-border spinner-border-sm",staticStyle:{display:"none"},attrs:{role:"status","aria-hidden":"true"}}),t._v("\n                  UNlOCK\n                ")])]],2)]),t._v(" "),e("div",{staticClass:"text-mute",staticStyle:{"margin-top":"68px"}},[t._v("\n            My Liquidity Shares in Pool:\n            "),e("span",{staticClass:"text-mute my-liquidity"},[t._v(t._s(t.my_liquidity))])]),t._v(" "),e("div",{staticClass:"input-group mb-4 mt-4"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.liquidity_volume,expression:"liquidity_volume"}],staticClass:"form-control",staticStyle:{color:"black"},attrs:{type:"text",placeholder:"liquidity volume","aria-label":"liquidity-volume","aria-describedby":"liquidity-volume",id:"liquidity-volume",disabled:"disabled"},domProps:{value:t.liquidity_volume},on:{input:function(i){i.target.composing||(t.liquidity_volume=i.target.value)}}}),t._v(" "),t._m(2),t._v(" "),e("div",{staticClass:"w-100 mt-4 mb-2"},[e("button",{staticClass:"remove",attrs:{type:"button",id:"removeLiquidityButton"},on:{click:t.removeLiquidity}},[e("span",{staticClass:"spinner spinner-border spinner-border-sm",staticStyle:{display:"none"},attrs:{role:"status","aria-hidden":"true"}}),t._v("\n                REMOVE LIQUIDITY\n              ")])])])]),t._v(" "),e("div",{staticClass:"right"},[e("div",{staticClass:"car"},[e("p",{staticClass:"card-text"},[e("span",{staticClass:"key text-muted"},[t._v("Pool Total Liquidity")]),t._v(" "),e("span",{staticClass:"text-mute float-right symbol",staticStyle:{"margin-left":"5px"}},[t._v(t._s(t.symbol))]),t._v(" "),e("span",{staticClass:"value float-right text-mute",attrs:{id:"total-liquidity"}},[t._v(t._s(t.total_liquidity))])]),t._v(" "),e("p",{staticClass:"card-text"},[e("span",{staticClass:"key text-muted"},[t._v("My Liquidity Shares")]),t._v(" "),e("span",{staticClass:"value float-right text-mute my-liquidity"},[t._v(t._s(t.my_liquidity))])]),t._v(" "),e("p",{staticClass:"card-text"},[e("span",{staticClass:"key text-muted"},[t._v(" Liquidity Share Value")]),t._v(" "),e("span",{staticClass:"text-mute float-right symbol",staticStyle:{"margin-left":"5px"}},[t._v(t._s(t.symbol))]),t._v(" "),e("span",{staticClass:"value float-right text-mute"},[t._v(t._s(t.PerLiquidityShare))])])])])])])])])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"modal-body"},[i("p",{staticClass:"all",staticStyle:{color:"black"}})])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"login"},[i("a",{attrs:{href:"https://deri.finance/"}},[i("img",{attrs:{src:e("xAza"),alt:""}})])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"input-group-append"},[i("span",{staticClass:"input-group-text",staticStyle:{background:"#e9ecef"},attrs:{id:""}},[this._v("LiquidityShares")])])}]};var d=e("C7Lr")(r,c,!1,function(t){e("tkMF"),e("PEiY"),e("2NaQ")},"data-v-413d5180",null);i.default=d.exports},PEiY:function(t,i){},tkMF:function(t,i){}});