(this["webpackJsonpapp.deri.finance"]=this["webpackJsonpapp.deri.finance"]||[]).push([[4],{575:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var c=a(27),n=a(167),s=a(16),i=a(5),r=a(577),l=a(59);function d(e){var t=Object(i.useState)("--"),a=Object(s.a)(t,2),d=a[0],o=a[1];return Object(i.useEffect)((function(){var t=e.allowZero,a=Object(n.a)(e,["allowZero"]);return(void 0!==e.value&&""!==e.value&&"NaN"!==e.value||0===(isNaN(e.value)&&Math.abs(e.value))&&!0===t)&&o(Object(l.jsx)(r.a,Object(c.a)(Object(c.a)({},a),{},{displayType:"text"}))),function(){}}),[e.value]),d}},576:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var c=a(0),n=a.n(c),s=a(1),i=a(16),r=a(5),l=(a(24),a(59));function d(e){var t=e.btnText,a=e.className,c=e.disabled,d=e.click,o=e.afterClick,u=e.checkApprove,j=e.wallet,b=e.spec,x=Object(r.useState)(c?"disabled":"enabled"),O=Object(i.a)(x,2),m=O[0],v=O[1],f=Object(r.useState)(!0),p=Object(i.a)(f,2),h=p[0],N=p[1],y=Object(r.useState)(!1),I=Object(i.a)(y,2),g=I[0],k=I[1],w=Object(r.useRef)(null),S=function(){var e=Object(s.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("enabled"===m){e.next=2;break}return e.abrupt("return");case 2:return L(),e.next=5,d();case 5:e.sent&&o&&o(),C();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){v("disabled"),k(!0),w.current&&(w.current.style.display="inline-block")},C=function(){w.current&&(w.current.style.display="none"),v("enabled"),k(!1)},T=function(){var e=Object(s.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u&&j&&j.detail.account)){e.next=5;break}return e.next=3,j.isApproved(b.pool,b.bTokenId);case 3:t=e.sent,N(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(s.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(),e.next=3,j.approve(b.pool,b.bTokenId);case 3:e.sent.success?N(!0):(N(!1),alert("Approve faild")),C();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){return T(),function(){}}),[j,b,u]),Object(l.jsxs)("button",{className:a,onClick:function(){h?S():E()},children:[Object(l.jsx)("span",{className:"btn-loading-wrap",children:Object(l.jsx)("span",{ref:w,className:"spinner spinner-border spinner-border-sm",style:{display:"none",marginRight:"2"}})}),g?"PENDING":h?t:"APPROVE"]})}},578:function(e,t,a){"use strict";var c=a(27),n=a(4),s=a(6),i=a(12),r=a(11),l=a(5),d=a.n(l),o=a(583),u=a.n(o),j=a(59);t.a=function(e){var t=document.getElementById("root"),a={overlay:{position:"fixed",zIndex:1,background:"rgb(0 0 0 / 0.5)"},content:{position:"absolute",border:0,background:"none",inset:0,overflow:"initial"}};return function(l){Object(i.a)(o,l);var d=Object(r.a)(o);function o(e){var t;return Object(n.a)(this,o),(t=d.call(this,e)).state={modalIsOpen:!1},t}return Object(s.a)(o,[{key:"render",value:function(){var n=this.props,s=n.modalIsOpen,i=n.className,r=n.overlay,l=void 0===r?{}:r,d=Object.assign(a.overlay,Object(c.a)({},l)),o=Object.assign(a,{overlay:d});return Object(j.jsx)(u.a,{isOpen:s,style:o,appElement:t,children:Object(j.jsx)("div",{className:i,children:Object(j.jsx)(e,Object(c.a)(Object(c.a)({},this.props),{},{className:i,onClose:this.props.onClose}))})})}}]),o}(d.a.Component)}},579:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var c=a(5);function n(e){return Object(c.useEffect)((function(){return document.querySelector("body").style.overflow="hidden",function(){e||(document.querySelector("body").style.overflow="auto")}}),[]),null}},602:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var c=a(31);function n(){return new URLSearchParams(Object(c.h)().search)}},603:function(e,t,a){"use strict";var c=a(27),n=a(604),s=a(5),i=a(24),r=a(0),l=a.n(r),d=a(1),o=a(16),u=a(577),j=a(576);a(630);var b=a(579),x=a(59);var O=a(164),m=a(578),v=a(43),f=a(575);const p=Object(m.a)((function(e){var t=e.wallet,a=e.address,c=e.baseToken,n=e.onClose,r=e.afterAdd,O=e.balance,m=e.isLpPool,v=e.baseTokenId,f=e.symbolId,p=Object(s.useState)("0"),h=Object(o.a)(p,2),N=h[0],y=h[1],I=Object(s.useState)("00"),g=Object(o.a)(I,2),k=g[0],w=g[1],S=Object(s.useState)(""),L=Object(o.a)(S,2),C=L[0],T=L[1],E=function(e){var t=e.wallet,a=e.address,c=e.symbolId,n=Object(s.useState)({}),r=Object(o.a)(n,2),u=r[0],j=r[1],b=function(){var e=Object(d.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isConnected()||!a){e.next=5;break}return e.next=3,Object(i.getSpecification)(t.detail.chainId,a,c);case 3:n=e.sent,j(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){return b(),function(){}}),t.detail.account,a),u}({wallet:t,address:a,symbolId:f});Object(b.a)();var A=function(){var e=Object(d.a)(l.a.mark((function e(){var c,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Object(i.bg)(O),!Object(i.bg)(C).gt(c)){e.next=5;break}return alert("not sufficient funds"),e.abrupt("return",!1);case 5:if(!(E&&+C<+E.minAddLiquidity)){e.next=8;break}return alert("The input liquidity shall not be less than ".concat(E.minAddLiquidity)),e.abrupt("return",!1);case 8:if(!(C<=0||isNaN(C))){e.next=11;break}return alert("It has to be greater than zero"),e.abrupt("return",!1);case 11:if(n=null,!m){e.next=18;break}return e.next=15,Object(i.addLpLiquidity)(t.detail.chainId,a,t.detail.account,C);case 15:n=e.sent,e.next=21;break;case 18:return e.next=20,Object(i.addLiquidity)(t.detail.chainId,a,t.detail.account,C,v);case 20:n=e.sent;case 21:return n&&n.success||alert("failure of transaction"),e.abrupt("return",!0);case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){var e=(+O).toFixed(2),t=e.substring(e.indexOf(".")+1,e.length);return y(e),w(t),function(){}}),[O]),Object(x.jsx)("div",{className:"modal-dialog",children:Object(x.jsxs)("div",{className:"modal-content",children:[Object(x.jsxs)("div",{className:"modal-header",children:[Object(x.jsx)("div",{className:"title",children:"ADD LIQUIDITY"}),Object(x.jsx)("div",{className:"close",onClick:n,children:Object(x.jsx)("span",{children:"\xd7"})})]}),Object(x.jsx)("div",{className:"modal-body",children:Object(x.jsxs)("div",{className:"margin-box-info",children:[Object(x.jsx)("div",{children:"Wallet Balance"}),Object(x.jsxs)("div",{className:"money",children:[Object(x.jsxs)("span",{children:[Object(x.jsxs)("span",{className:"bt-balance",children:[Object(x.jsx)(u.a,{displayType:"text",value:N,thousandSeparator:!0,allowZero:!0,decimalScale:0}),".",Object(x.jsx)("span",{className:"float",children:Object(x.jsx)(u.a,{displayType:"text",value:k,thousandSeparator:!0,decimalScale:2,allowZero:!0})})]}),Object(x.jsx)("div",{className:"base-token",children:c})]}),Object(x.jsx)("span",{className:"add"})]}),Object(x.jsxs)("div",{className:"enter-margin",children:[Object(x.jsx)("div",{className:"input-margin",children:Object(x.jsxs)("div",{className:"box",children:[Object(x.jsx)("div",{className:"amount",style:{display:C?"block":"none"},children:"LIQUIDITY"}),Object(x.jsx)("input",{type:"number",className:"margin-value",placeholder:"LIQUIDITY",value:C,onChange:function(e){var t=e.target.value;T(t)}})]})}),Object(x.jsx)("div",{children:c})]}),Object(x.jsxs)("div",{className:"max",children:["MAX: ",Object(x.jsx)("span",{className:"max-num",children:O}),Object(x.jsx)("span",{className:"max-btn-left",onClick:function(){T(O)},children:"ADD ALL"})]}),Object(x.jsx)("div",{className:"add-margin-btn",children:Object(x.jsx)(j.a,{className:"margin-btn",click:A,btnText:"ADD",afterClick:r})})]})})]})})})),h=Object(m.a)((function(e){var t=e.wallet,a=e.address,c=e.liqInfo,n=e.onClose,r=e.afterRemove,O=e.isLpPool,m=e.baseTokenId,v=e.unit,f=Object(s.useState)(""),p=Object(o.a)(f,2),h=p[0],N=p[1],y=Object(s.useState)("0"),I=Object(o.a)(y,2),g=I[0],k=I[1],w=Object(s.useState)("00"),S=Object(o.a)(w,2),L=S[0],C=S[1];Object(b.a)();var T=function(){var e=Object(d.a)(l.a.mark((function e(){var n,s,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(i.bg)(c.totalShares),!Object(i.bg)(h).gt(n)){e.next=5;break}return alert("Your current max removable shares are  ".concat(c.totalShares)),e.abrupt("return",!1);case 5:if(O){e.next=10;break}if(!((s=+c.totalShares-+h)<1&&s>0)){e.next=10;break}return alert('Leaving staking balance of smaller than 1 is not allowed. Please click "MAX" to remove all if you are to withdraw all of your liquidity.'),e.abrupt("return",!1);case 10:if(!(+h<=0||isNaN(h))){e.next=13;break}return alert("Invalid Liquidity!"),e.abrupt("return",!1);case 13:if(r=null,!O){e.next=20;break}return e.next=17,Object(i.removeLpLiquidity)(t.detail.chainId,a,t.detail.account,h);case 17:r=e.sent,e.next=23;break;case 20:return e.next=22,Object(i.removeLiquidity)(t.detail.chainId,a,t.detail.account,h,m);case 22:r=e.sent;case 23:if(r&&r.success){e.next=26;break}return alert("failure of transaction"),e.abrupt("return",!1);case 26:return e.abrupt("return",!0);case 27:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){if(c&&c.formatShares){var e=c.formatShares,t=e.substring(e.indexOf(".")+1,e.indexOf(".")+3);k(e),C(t)}return function(){}}),[c.totalShares]),Object(x.jsx)("div",{className:"modal-dialog",children:Object(x.jsxs)("div",{className:"modal-content",children:[Object(x.jsxs)("div",{className:"modal-header",children:[Object(x.jsx)("div",{className:"title",children:"REMOVE LIQUIDITY"}),Object(x.jsx)("div",{className:"close","data-dismiss":"modal",onClick:n,children:Object(x.jsx)("span",{children:"\xd7"})})]}),Object(x.jsx)("div",{className:"modal-body",children:Object(x.jsxs)("div",{className:"margin-box-info",children:[Object(x.jsx)("div",{children:"Shares Available"}),Object(x.jsxs)("div",{className:"money",children:[Object(x.jsx)("span",{children:Object(x.jsxs)("span",{className:"bt-balance",children:[Object(x.jsx)(u.a,{displayType:"text",value:g,decimalScale:0,thousandSeparator:!0}),".",Object(x.jsx)("span",{className:"float",children:L})]})}),Object(x.jsx)("span",{className:"remove"})]}),Object(x.jsxs)("div",{className:"enter-margin",children:[Object(x.jsx)("div",{className:"input-margin",children:Object(x.jsxs)("div",{className:"box",children:[Object(x.jsx)("div",{className:"amount",style:{display:h?"block":"none"},children:"LIQUIDITY SHARES"}),Object(x.jsx)("input",{type:"number",className:"margin-value",placeholder:"LIQUIDITY SHARES",value:h,onChange:function(e){var t=e.target.value;N(t)}})]})}),Object(x.jsx)("div",{children:v})]}),Object(x.jsxs)("div",{className:"max",children:[Object(x.jsx)("span",{children:"MAX REMOVEABLE:"}),Object(x.jsx)("span",{className:"max-num",children:c.totalShares}),Object(x.jsx)("span",{className:"max-btn-left",onClick:function(){N(c.totalShares)},children:"REMOVE ALL"})]}),Object(x.jsx)("div",{className:"add-margin-btn",children:Object(x.jsx)(j.a,{click:T,className:"margin-btn",btnText:"REMOVE",afterClick:r})})]})})]})})})),N=({version:e,wallet:t,chainId:a,address:c,baseToken:n,isLpPool:r,liqInfo:l,loadLiqidityInfo:d,baseTokenId:o,symbolId:u})=>{const[b,O]=Object(s.useState)(!1),[m,f]=Object(s.useState)("add"),[N,y]=Object(s.useState)(!1),[I,g]=Object(s.useState)(""),[k,w]=Object(s.useState)(null),S=async()=>{if(t.isConnected()&&Object(v.b)(t.detail.chainId,a)){let e=null;e=r?await Object(i.getLpWalletBalance)(t.detail.chainId,c,t.detail.account):await Object(i.getWalletBalance)(t.detail.chainId,c,t.detail.account,o),"object"!==typeof e&&g(e)}};Object(s.useEffect)((()=>(S(),d(),()=>{})),[t.detail.account]);const L=async()=>{let e=null;e=r?await Object(i.unlockLp)(a,c,t.detail.account):await Object(i.unlock)(a,c,t.detail.account,o),e&&e.success?O(!0):alert(e.error&&e.error.message||"Approve failed")},C=async()=>{await t.connect()},T=()=>{y(!0),f("add")},E=()=>{y(!1),S(),d(),t.refresh()},A=()=>{y(!0),f("remove")};return Object(s.useEffect)((()=>(t.isConnected()&&Object(v.b)(t.detail.chainId,a)&&(async()=>{if(r){const e=await Object(i.isLpUnlocked)(a,c,t.detail.account);return O(e),e}{const e=await Object(i.isUnlocked)(a,c,t.detail.account,o);O(e)}})(),()=>{})),[t.detail.account]),Object(s.useEffect)((()=>{if(t.isConnected()&&Object(v.b)(t.detail.chainId,a)&&b)w(Object(x.jsxs)("div",{className:"add-remove-liquidity",children:[Object(x.jsx)("button",{className:"add-liquidity",onClick:T,children:"ADD LIQUIDITY"}),Object(x.jsx)("button",{className:"remove-liquidity",onClick:A,children:"REMOVE LIQUIDITY"})]}));else{let e=null;t.isConnected()?Object(v.b)(t.detail.chainId,a)?b||(e=Object(x.jsx)("div",{className:"approve",children:Object(x.jsx)(j.a,{className:"approve-btn",click:L,btnText:"APPROVE"})})):e=Object(x.jsx)("div",{className:"approve",children:Object(x.jsx)(j.a,{className:"approve-btn wrong-network",btnText:"Wrong Network"})}):e=Object(x.jsx)("div",{className:"approve",children:Object(x.jsx)(j.a,{className:"approve-btn",click:C,btnText:"Connect Wallet"})}),w(e)}return()=>{}}),[t.detail.account,b]),Object(x.jsxs)("div",{className:"liquidity-btn",children:["add"===m?Object(x.jsx)(p,{modalIsOpen:N,isLpPool:r,onClose:E,balance:I,address:c,wallet:t,baseToken:n,afterAdd:E,baseTokenId:o,symbolId:u}):Object(x.jsx)(h,{modalIsOpen:N,isLpPool:r,onClose:E,liqInfo:l,address:c,wallet:t,unit:"v1"===e?"shares":n,afterRemove:E,baseTokenId:o,symbolId:u}),k]})};var y=Object(O.b)("wallet")(Object(O.c)((function({wallet:e,version:t,chainId:a,baseToken:c,address:n,type:r,baseTokenId:l,symbolId:d}){const[o,u]=Object(s.useState)({}),[j,b]=Object(s.useState)(c),O="lp"===r,m=async()=>{const s=await Object(i.getPoolInfoApy)(a,n,l),r=await Object(i.getPoolLiquidity)(a,n,l);if(e.isConnected()&&Object(v.b)(a,e.detail.chainId)){let r,d=null;if(d=O?await Object(i.getLpLiquidityInfo)(a,n,e.detail.account):await Object(i.getLiquidityInfo)(a,n,e.detail.account,l),Object(v.g)(n)){r=100*+(await Object(i.getLpPoolInfoApy)(a,n)).apy2}if(d){const e=Object(i.bg)(d.shares);if("v1"===t){const t=e.multipliedBy(d.shareValue);u({total:+d.poolLiquidity,apy:(100*+s.apy).toFixed(2),shareValue:d.shareValue,percent:d.poolLiquidity>0?t.dividedBy(d.poolLiquidity).multipliedBy(100).toFixed(2):0,shares:e.toFixed(2),formatShares:e.toFixed(2),totalShares:Object(i.bg)(e).toString(),values:t.toFixed(2),lpApy:r,unit:"shares",sharesTitle:"Staked Balance"})}else u({total:+d.poolLiquidity,apy:(100*+s.apy).toFixed(2),pnl:(+d.pnl).toFixed(2),shares:e.toString(),formatShares:e.toFixed(2),totalShares:Object(i.bg)(e).plus(d.pnl).toString(),percent:d.poolLiquidity>0?e.dividedBy(d.poolLiquidity).multipliedBy(100).toFixed(2):0,unit:c,sharesTitle:"My Liquidity"})}}else{let e;if(Object(v.g)(n)){e=100*+(await Object(i.getLpPoolInfoApy)(a,n)).apy2}r&&u({total:r.liquidity,apy:100*+s.apy,lpApy:e})}};return Object(s.useEffect)((()=>(m(),Object(v.f)(n)&&b("CAKE-LP"),()=>{})),[e.detail.account,c]),Object(x.jsxs)("div",{className:"liquidity-box",children:[Object(x.jsxs)("div",{className:"odd title",children:["Provide ",j," Earn DERI"]}),Object(x.jsxs)("div",{className:"odd text",children:[Object(x.jsx)("div",{className:"text-title",children:"Pool Total Liquidity"}),Object(x.jsx)("div",{className:"text-num",children:Object(x.jsx)(f.a,{allowZero:!0,value:o.total,suffix:` ${j}`,thousandSeparator:!0})})]}),Object(x.jsxs)("div",{className:"odd text",children:[Object(x.jsx)("div",{className:"text-title",children:"APY"}),Object(x.jsxs)("div",{className:"text-num",children:[Object(x.jsx)("span",{title:Object(v.g)(n)&&"DERI-APY",className:`${Object(v.g)(n)&&"sushi-apy-underline"}`,children:Object(x.jsx)(f.a,{value:o.apy,decimalScale:2,suffix:"%"})}),Object(v.g)(n)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("span",{children:" +"})," ",Object(x.jsx)("span",{className:"sushi-apy-underline text-num",title:Object(v.h)(n)?"SUSHI-APY":"CAKE-APY",children:Object(x.jsx)(f.a,{value:o.lpApy,allowZero:!0,decimalScale:2,suffix:"%"})})]})]})]}),"v1"===t&&Object(x.jsxs)("div",{className:"odd text",children:[Object(x.jsx)("div",{className:"text-title",children:"Liquidity Share Value"}),Object(x.jsx)("div",{className:"text-num",children:Object(x.jsx)(f.a,{allowZero:!0,decimalScale:6,value:o.shareValue,suffix:" "+j,thousandSeparator:!0})})]}),Object(x.jsxs)("div",{className:"odd text",children:[Object(x.jsx)("div",{className:"text-title",children:"My Liquidity Pencentage"}),Object(x.jsx)("div",{className:"text-num",children:Object(x.jsx)(f.a,{allowZero:!0,value:o.percent,decimalScale:2,suffix:"%"})})]}),Object(x.jsxs)("div",{className:"odd text",children:[Object(x.jsxs)("div",{className:"text-title",children:[o.sharesTitle," "]}),Object(x.jsxs)("div",{className:"text-num",children:[Object(x.jsx)(f.a,{allowZero:!0,value:o.formatShares,decimalScale:2})," ",Object(x.jsx)("span",{children:o.unit})," "]})]}),"v2"===t&&Object(x.jsxs)("div",{className:"odd text",children:[Object(x.jsx)("div",{className:"text-title",children:"Mining PnL"}),Object(x.jsxs)("div",{className:"text-num",children:["\u2248 \xa0",Object(x.jsx)(f.a,{allowZero:!0,prefix:" ",value:o.pnl,decimalScale:2,suffix:" "+j})]})]}),Object(x.jsx)("div",{className:"odd claim-network",children:Object(x.jsx)("div",{className:"text-title money",children:"v1"===t&&Object(x.jsx)(f.a,{allowZero:!0,value:o.values,suffix:" "+j,decimalScale:2})})}),Object(x.jsx)(N,{version:t,wallet:e,chainId:a,address:n,liqInfo:o,baseToken:j,isLpPool:O,loadLiqidityInfo:m,symbolId:d,baseTokenId:l})]})})));t.a=function(e){return Object(x.jsxs)("div",{className:"liquidity-info",children:[Object(x.jsx)(n.a,Object(c.a)(Object(c.a)({},e),{},{miningClaim:!0})),Object(x.jsx)(y,Object(c.a)({},e))]})}},604:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var c=a(0),n=a.n(c),s=a(1),i=a(16),r=a(5),l=a(24);var d=a(166);var o=a(576),u=a(43),j=a(59);function b(e){var t=e.wallet,a=e.miningClaim,c=e.tradingClaim,b=Object(r.useState)("Collect Wallet"),x=Object(i.a)(b,2),O=x[0],m=x[1],v=Object(r.useState)(!1),f=Object(i.a)(v,2),p=f[0],h=f[1],N=function(e){var t=Object(r.useState)({}),a=Object(i.a)(t,2),c=a[0],d=a[1],o=null,u=function(){var t=Object(s.a)(n.a.mark((function t(){var a,c,s,i,r,o;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isConnected()){t.next=10;break}return t.next=3,Object(l.getUserInfoAll)(e.detail.account);case 3:a=t.sent,c=(+a.total).toFixed(2),s=a.valid?(+a.amount).toFixed(2):0,i=(+a.lp).toFixed(2),r=(+a.trade).toFixed(2),o=a.chainId,d({claimed:c,unclaimed:s,harvestDeriLp:i,harvestDeriTrade:r,chainId:o});case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){return o=window.setInterval(u,18e4),u(),function(){return clearInterval(o)}}),[e.detail.account]),[c,o]}(t),y=Object(i.a)(N,2),I=y[0],g=y[1],k=Object(r.useState)(""),w=Object(i.a)(k,2),S=w[0],L=w[1],C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"chainInfo";return d[l.DeriEnv.get()][t][e]||{}}(I.chainId),T=function(){var e=Object(s.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(u.b)(t.detail.chainId,I.chainId)){e.next=3;break}return alert("Your DERI is on ".concat(C.text," . Connect to ").concat(C.text," to claim.")),e.abrupt("return");case 3:if(0!==I.unclaimed){e.next=6;break}return alert("Sorry,no DERI to claim yet"),e.abrupt("return");case 6:if(!(parseInt(Date.now()/1e3)%28800<1800)){e.next=10;break}return alert("Claiming DERI is disabled during first 30 minutes of each epoch"),e.abrupt("return");case 10:return e.next=12,Object(l.mintDToken)(t.detail.chainId,t.detail.account);case 12:if(!e.sent.success){e.next=18;break}return clearInterval(g),e.abrupt("return",!0);case 18:return alert("Claim failed"),e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(s.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isConnected()){e.next=5;break}return e.next=3,T();case 3:e.sent&&h(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){var e=null;return a&&(e=window.setInterval((function(){var e=28800,t=parseInt(Date.now()/1e3),a=parseInt(t/e)*e+e-t,c=parseInt(a/3600),n=parseInt(a%3600/60),s=parseInt(a%60);L("".concat(c," h ").concat(n," m ").concat(s," s"))}),1e3)),t.isConnected()?m("CLAIM"):m("Collect Wallet"),function(){e&&clearInterval(e)}}),[t.detail.account]),Object(j.jsxs)("div",{className:"claim-box",children:[Object(j.jsx)("div",{className:"odd title",children:a?"My Liquidity-Providing Harvest in Current Epoch":"My Trading Harvest in Current Epoch"}),a&&Object(j.jsxs)("div",{className:"odd text",children:[Object(j.jsx)("div",{className:"text-title",children:"Current Epoch Remaining Time"}),Object(j.jsx)("div",{className:"text-num",children:S})]}),Object(j.jsxs)("div",{className:"odd text",children:[a&&Object(j.jsx)("div",{className:"text-title",children:"My Harvest in Current Epoch (estimated)"}),c&&Object(j.jsx)("div",{className:"text-title",children:" My Trading Harvest in Current Epoch (Est)"}),Object(j.jsxs)("div",{className:"text-num",children:[a?I.harvestDeriLp:I.harvestDeriTrade," DERI"]})]}),Object(j.jsxs)("div",{className:"odd text",children:[Object(j.jsx)("div",{className:"text-title",children:"Claimed DERI"}),Object(j.jsx)("div",{className:"text-num",children:p?(+I.claimed+ +I.unclaimed).toFixed(2):I.claimed})]}),Object(j.jsxs)("div",{className:"odd text",children:[Object(j.jsx)("div",{className:"text-title"}),Object(j.jsx)("div",{className:"text-num"})]}),Object(j.jsxs)("div",{className:"odd text",children:[Object(j.jsx)("div",{className:"text-title",children:"Unclaimed DERI"}),Object(j.jsx)("div",{className:"text-num",children:p?0:(+I.unclaimed).toFixed(2)})]}),c&&Object(j.jsxs)("div",{className:"odd text",children:[Object(j.jsx)("div",{className:"text-title"}),Object(j.jsx)("div",{className:"text-num"})]}),Object(j.jsx)("div",{className:"odd claim-network",children:a&&Object(j.jsxs)("div",{className:"text-title",children:["Your DERI is on ",C.text," . Connect to ",C.text," to claim."]})}),Object(j.jsx)("div",{className:"claim-btn",children:Object(j.jsx)(o.a,{btnText:O,click:E,className:"claim"})})]})}},605:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var c=a(27),n=a(167),s=a(604),i=a(0),r=a.n(i),l=a(1),d=a(16),o=a(5),u=a(24),j=a(31),b=a(164),x=a(43),O=a(273),m=a(59),v=new O.a;var f=Object(b.b)("version")(Object(b.c)((function(e){var t=e.wallet,a=void 0===t?{}:t,c=e.version,n=e.chainId,s=e.address,i=e.symbolId,b=Object(o.useState)({}),O=Object(d.a)(b,2),f=O[0],p=O[1],h=Object(o.useState)({}),N=Object(d.a)(h,2),y=N[0],I=N[1],g=Object(j.g)(),k=function(){var e=Object(l.a)(r.a.mark((function e(){var t,c,i,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.getUserInfoAll)(a.account);case 2:return t=e.sent,e.next=5,Object(u.getUserInfoInPool)(n,s,a.account);case 5:c=e.sent,i=(+t.trade).toFixed(2),l=c.volume1h,p({harvestDeriTrade:i,myTradingVolumeCurrent:l});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(l.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.getPoolInfoApy)(n,s);case 2:t=e.sent,a=t.volume1h,I({totalTradingVolumeCurrent:a});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){return a&&a.account&&(k(),w()),function(){}}),[]),Object(m.jsxs)("div",{className:"liquidity-box",children:[Object(m.jsx)("div",{className:"odd title",children:"Trade to Earn DERI"}),Object(m.jsxs)("div",{className:"odd text",children:[Object(m.jsx)("div",{className:"text-title",children:"Total Trading Volume in Current Hour"}),Object(m.jsx)("div",{className:"text-num",children:y.totalTradingVolumeCurrent||0})]}),Object(m.jsxs)("div",{className:"odd text",children:[Object(m.jsx)("div",{className:"text-title",children:"My Trading Volume in Current Hour"}),Object(m.jsx)("div",{className:"text-num",children:f.myTradingVolumeCurrent||0})]}),Object(m.jsxs)("div",{className:"odd text",children:[Object(m.jsx)("div",{className:"text-title"}),Object(m.jsx)("div",{className:"text-num"})]}),Object(m.jsxs)("div",{className:"odd text",children:[Object(m.jsx)("div",{className:"text-title"}),Object(m.jsx)("div",{className:"text-num"})]}),Object(m.jsxs)("div",{className:"odd text",children:[Object(m.jsx)("div",{className:"text-title"}),Object(m.jsx)("div",{className:"text-num"})]}),Object(m.jsx)("div",{className:"odd claim-network"}),Object(m.jsx)("div",{className:"claim-btn",children:Object(m.jsx)("button",{className:"claim",onClick:function(){var e=v.load(c),t=c.isV1?e.find((function(e){return Object(x.b)(e.pool,s)})):e.find((function(e){return Object(x.b)(e.pool,s)&&e.symbolId===i}));Object(x.l)(c.current,t),g.push("/lite")},children:"TRADE"})})]})})));function p(e){var t=e.wallet,a=Object(n.a)(e,["wallet"]);return Object(m.jsxs)("div",{className:"trade-info",children:[Object(m.jsx)(s.a,{wallet:t,tradingClaim:!0}),Object(m.jsx)(f,Object(c.a)({},a))]})}},630:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c,n=a(583),s=(c=n)&&c.__esModule?c:{default:c};t.default=s.default,e.exports=t.default}}]);
//# sourceMappingURL=4.beed4931.chunk.js.map