{"version":3,"sources":["utils/DeriNumberFormat.js","components/Token/img/pancake.svg","components/Token/img/sushi.svg","components/Token/Token.js","mobile/pages/Token/Token.js"],"names":["DeriNumberFormat","props","renderablity","setRenderablity","useState","useEffect","allowZero","others","undefined","value","isNaN","Math","abs","displayType","inject","observer","wallet","lang","loading","deriTokenAddress","setDeriTokenAddress","deriInfo","setDeriInfo","config","useConfig","hasConnectWallet","detail","account","loaded","address","chainId","interval","window","setInterval","async","resp","fetch","res","json","obj","price","current_price","market_cap","circulating_supply","parseInt","total_supply","getDeriInfo","clearInterval","className","onClick","tokenSymbol","tokenDecimals","ethereum","request","method","params","type","options","symbol","decimals","console","log","error","target","switchNetwork","open","src","pancake","sushi","thousandSeparator","decimalScale","Token"],"mappings":"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","file":"static/js/29.24315217.chunk.js","sourcesContent":["import React,{useState,useEffect} from 'react'\nimport NumberFormat from 'react-number-format'\n\nexport default function DeriNumberFormat(props){\n  const [renderablity, setRenderablity] = useState('--');\n\n  useEffect(() => {\n    const {allowZero,...others} = props \n    if(((props.value !== undefined && props.value !== '' && props.value !== 'NaN') || ((isNaN(props.value) && Math.abs(props.value)) === 0 && allowZero === true ))) {\n      setRenderablity(<NumberFormat {...others} displayType = 'text' />)\n    } \n    return () => {};\n  }, [props.value]);\n\n  return renderablity;\n}","export default __webpack_public_path__ + \"static/media/pancake.c40eba3d.svg\";","export default __webpack_public_path__ + \"static/media/sushi.084b9b6d.svg\";","import React, { useEffect, useState } from 'react'\nimport { inject, observer } from 'mobx-react'\nimport DeriNumberFormat from '../../utils/DeriNumberFormat'\nimport useConfig from '../../hooks/useConfig';\nimport pancake from './img/pancake.svg'\nimport sushi from './img/sushi.svg'\nfunction Token({ wallet = {}, lang,loading }) {\n    const [deriTokenAddress, setDeriTokenAddress] = useState()\n    const [deriInfo, setDeriInfo] = useState()\n    const config = useConfig();\n    const addToken = async () => {\n        if (deriTokenAddress) {\n            const tokenSymbol = 'DERI';\n            const tokenDecimals = 18;\n            try {\n                const wasAdded = await window.ethereum.request({\n                    method: 'wallet_watchAsset',\n                    params: {\n                        type: 'ERC20', // Initially only supports ERC20, but eventually more!\n                        options: {\n                            address: deriTokenAddress, // The address that the token is at.\n                            symbol: tokenSymbol, // A ticker symbol or shorthand, up to 5 chars.\n                            decimals: tokenDecimals, // The number of decimals in the token\n                        },\n                    },\n                });\n\n                if (wasAdded) {\n                    console.log('Thanks for your interest!');\n                } else {\n                    console.log('Your loss!');\n                }\n            } catch (error) {\n                console.log(error);\n            }\n        }\n    }\n    const getDeriInfo = async () => {\n        let path = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=deri-protocol&order=market_cap_desc&per_page=100&page=1&sparkline=false'\n        let resp = await fetch(path);\n        let res = await resp.json();\n        if (res) {\n            let obj = {}\n            obj.price = res[0].current_price\n            obj.market_cap = res[0].market_cap\n            obj.circulating_supply = parseInt(res[0].circulating_supply)\n            obj.total_supply = parseInt(res[0].total_supply)\n            setDeriInfo(obj)\n        }\n\n    }\n    const hasConnectWallet = () => wallet && wallet.detail && wallet.detail.account\n    \n    const sushiBuy = async ()=> {\n        if(hasConnectWallet()){\n            await wallet.switchNetwork(config[1])\n            window.open(\"https://app.sushi.com/swap?inputCurrency=&outputCurrency=0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9\")\n        }else{\n            window.open(\"https://app.sushi.com/swap?inputCurrency=&outputCurrency=0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9\")\n        }\n    }\n\n    const pancakeBuy = async ()=> {\n        if(hasConnectWallet()){\n            await wallet.switchNetwork(config[56])\n            window.open(\"https://exchange.pancakeswap.finance/#/swap?inputCurrency=0xe60eaf5a997dfae83739e035b005a33afdcc6df5\")\n        }else{\n            window.open(\"https://exchange.pancakeswap.finance/#/swap?inputCurrency=0xe60eaf5a997dfae83739e035b005a33afdcc6df5\")\n        }\n    }\n\n    useEffect(()=>{\n        loading.loading()\n        if(deriInfo){\n            loading.loaded() \n        }\n    },[deriInfo])\n\n    useEffect(() => {\n        if (hasConnectWallet()) {\n            let address;\n            if (wallet.detail.chainId == 56) {\n                address = '0xe60eaf5A997DFAe83739e035b005A33AfdCc6df5'\n            } else if (wallet.detail.chainId == 1) {\n                address = '0xa487bf43cf3b10dffc97a9a744cbb7036965d3b9'\n            } else if (wallet.detail.chainId == 128) {\n                address = '0x2bdA3e331Cf735D9420e41567ab843441980C4B8'\n            } else if (wallet.detail.chainId == 137) {\n                address = '0x3d1d2afd191b165d140e3e8329e634665ffb0e5e'\n            }\n            setDeriTokenAddress(address)\n        }\n\n    }, [wallet.detail])\n    useEffect(() => {\n        let interval = null;\n        //计数器\n        interval = window.setInterval(() => {\n            getDeriInfo()\n        }, 1000);\n        return () => {\n            interval && clearInterval(interval);\n        };\n    }, [])\n    return (\n        <div className='token-info'>\n            <div className='title'>\n                {lang['the-deri-token']}\n            </div>\n            <div className='add-to-matemask'>\n                <button onClick={addToken}>\n                    {lang['add-deri-to-matemask']}\n                </button>\n            </div>\n            <div className='buy-deri'>\n                <a target='_blank' onClick={pancakeBuy}>\n                    <div className='pancake-buy'>\n                        <div>\n                            <img src={pancake} />\n                        </div>\n                        <span>\n                            {lang['buy-deri']}\n                        </span>\n                    </div>\n                </a>\n                <a target='_blank' onClick={sushiBuy}>\n                    <div className='sushi-buy'>\n                        <div>\n                            <img src={sushi} />\n                        </div>\n                        <span>\n                            {lang['buy-deri']}\n                        </span>\n                    </div>\n                </a>\n            </div>\n            <div className='deri-info'>\n                <div className='bottom-square'></div>\n                <div className='line-of-box'>\n                    <div className='box'>\n                        <div className='num'>\n                            $ {deriInfo ? <DeriNumberFormat value={deriInfo.price} displayType='text' thousandSeparator={true} decimalScale='4' /> : '--'}\n                        </div>\n                        <div className='text'>\n                            {lang['price']}\n                        </div>\n                    </div>\n                    <div className='box'>\n                        <div className='num'>\n                            $ {deriInfo ? <DeriNumberFormat value={deriInfo.market_cap} displayType='text' thousandSeparator={true} decimalScale='0' /> : '--'}\n                        </div>\n                        <div className='text'>\n                            {lang['market-cap']}\n                        </div>\n                    </div>\n                </div>\n                <div className='line-of-box'>\n                    <div className='box'>\n                        <div className='num'>\n                            {deriInfo ? <DeriNumberFormat value={deriInfo.circulating_supply} displayType='text' thousandSeparator={true} decimalScale='0' /> : '--'}\n                        </div>\n                        <div className='text'>\n                            {lang['circulating-supply']}\n                        </div>\n                    </div>\n                    <div className='box'>\n                        <div className='num'>\n                            {deriInfo ? <DeriNumberFormat value={deriInfo.total_supply} displayType='text' thousandSeparator={true} decimalScale='0' /> : '--'}\n                        </div>\n                        <div className='text'>\n                            {lang['total-supply']}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\n\nexport default inject('wallet','loading')(observer(Token))","import TokenInfo from '../../../components/Token/Token';\nimport './token.less'\nexport default function Token({lang}){\n    return(\n        <div className='token'>\n           <TokenInfo lang={lang}></TokenInfo>\n        </div>\n    )\n}"],"sourceRoot":""}