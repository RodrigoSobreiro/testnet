(this["webpackJsonpapp.deri.finance"]=this["webpackJsonpapp.deri.finance"]||[]).push([[15],{608:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(40),c=n.n(a),s=n(87),i=n(148),l=n(2),r=n(16);function o(e){var t=e.btnText,n=e.className,a=e.disabled,o=e.click,d=e.afterClick,b=e.checkApprove,p=e.wallet,u=e.spec,j=e.lang,O=Object(l.useState)(a?"disabled":"enabled"),m=Object(i.a)(O,2),f=m[0],h=m[1],v=Object(l.useState)(!0),y=Object(i.a)(v,2),x=y[0],k=y[1],I=Object(l.useState)(!1),N=Object(i.a)(I,2),g=N[0],w=N[1],S=Object(l.useState)(t),T=Object(i.a)(S,2),A=T[0],$=T[1],C=Object(l.useRef)(null),E=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("enabled"===f){e.next=2;break}return e.abrupt("return");case 2:return F(),e.next=5,o();case 5:e.sent&&d&&d(),q();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){h("disabled"),w(!0),C.current&&(C.current.style.display="inline-block")},q=function(){C.current&&(C.current.style.display="none"),h("enabled"),w(!1)},_=function(){var e=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(b&&p&&p.detail.account)){e.next=5;break}return e.next=3,p.isApproved(u.pool,u.bTokenId);case 3:t=e.sent,k(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(),e.next=3,p.approve(u.pool,u.bTokenId);case 3:e.sent.success?k(!0):(k(!1),alert(j["approve-failed"])),q();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.useEffect)((function(){return _(),function(){}}),[p,u,b]),Object(l.useEffect)((function(){return t&&$(t),function(){}}),[t]),Object(r.jsxs)("button",{className:n,onClick:function(){x?E():K()},children:[Object(r.jsx)("span",{className:"btn-loading-wrap",children:Object(r.jsx)("span",{ref:C,className:"spinner spinner-border spinner-border-sm",style:{display:"none",marginRight:"2"}})}),g?j.pending:x?A:j.approve]})}},609:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(88),c=n(611),s=n(148),i=n(2),l=n(610),r=n(16);function o(e){var t=Object(i.useState)("--"),n=Object(s.a)(t,2),o=n[0],d=n[1];return Object(i.useEffect)((function(){var t=e.allowZero,n=Object(c.a)(e,["allowZero"]);return(void 0!==e.value&&""!==e.value&&"NaN"!==e.value||0===(isNaN(e.value)&&Math.abs(e.value))&&!0===t)&&d(Object(r.jsx)(l.a,Object(a.a)(Object(a.a)({},n),{},{displayType:"text"}))),function(){}}),[e.value]),o}},613:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(2),c=n(14),s=n(89),i=n(34);n(21);const l=c.a.get(),{chainInfo:r}=s[l];function o(e){const[t,n]=Object(a.useState)(!1),[s,o]=Object(a.useState)([]),[d,b]=Object(a.useState)([]),[p,u]=Object(a.useState)([]),[j,O]=Object(a.useState)([]),[m,f]=Object(a.useState)([]),[h,v]=Object(a.useState)([]);return Object(a.useEffect)((()=>{const t=e=>{const t=[];return e.reduce(((e,t)=>{const n=e.find((e=>Object(i.c)(e.pool.address,t.address)));if(n&&n.list.length<5)n.list.push(t);else{const n={pool:{network:t.network,symbol:t.symbol,address:t.address,formatAdd:t.formatAdd,version:t.version,chainId:t.chainId,airdrop:t.airdrop,type:t.type,bTokenSymbol:t.bTokenSymbol,bTokenId:t.bTokenId,symbolId:t.symbolId},list:[t]};e.push(n)}return e}),t),t};let a=Object(c.l)(l,"v2"),d=Object(c.l)(l,"v1");const p=Object(c.l)(l,"v2_lite"),j=Object(c.l)(l,"option"),m=Object(c.B)(l);let h=a.concat(d).concat(m).concat(p).concat(j).reduce(((e,t)=>{const n=e.findIndex((e=>e.chainId===t.chainId&&e.bTokenSymbol===t.bTokenSymbol&&t.version===e.version));return("v2"===t.version||"v2_lite"===t.version||"option"===t.version)&&n>-1&&-1===e[n].symbol.indexOf(t.symbol)?e[n].symbol+=`,${t.symbol}`:e.push(t),e}),[]);h=h.map((async e=>{const t=await Object(c.z)(e.chainId,e.pool,e.bTokenId)||{},n=await Object(c.y)(e.chainId,e.pool,e.bTokenId)||{},a=e.pool||"";return Object.assign(e,{network:r[e.chainId]&&r[e.chainId].name,liquidity:t.liquidity,apy:(100*+n.apy).toFixed(2),formatAdd:Object(i.d)(a),address:a,type:"perpetual",buttonText:"STAKING",multiplier:n.multiplier})}));const y=Object(c.t)(l).map((async e=>{const t=await Object(c.z)(e.chainId,e.pool)||{},n=await Object(c.y)(e.chainId,e.pool)||{},a=e.pool||"";let s,l;if(Object(i.k)(e.pool)){let t=await Object(c.v)(e.chainId,e.pool);s=t&&(100*+t.apy2).toFixed(2)}return Object(i.l)(e.pool)&&(l="SUSHI-APY"),Object(i.j)(e.pool)&&(l="CAKE-APY"),Object.assign(e,{network:r[e.chainId].name,liquidity:t.liquidity,apy:(100*+n.apy).toFixed(2),formatAdd:Object(i.d)(a),lpApy:s,address:a,type:"lp",label:l,buttonText:"STAKING"})})),x=h.concat(y);return Promise.all(x).then((a=>{let c=a.filter((e=>("v1"===e.version||!e.version)&&!e.retired)),s=a.filter((e=>("v2"===e.version||"v2_lite"===e.version)&&!e.retired)),i=a.filter((e=>"option"===e.version&&!e.retired));const l=a.filter((e=>e.retired&&!e.premining)),r=a.filter((e=>e.retired&&e.premining));e&&(c=t(c),s=t(s),i=t(i)),u(s),b(c),O(i),o(a),f(l),v(r),n(!0)})),()=>s.length=0}),[]),[t,s,d,p,j,m,h]}},627:function(e,t,n){"use strict";var a=n(2),c=n(20),s=n(89),i=n(14),l=n(609),r=n(45),o=n(608),d=n(34),b=n(607),p=n.n(b),u=n(16);const j=s[i.a.get()].chainInfo;function O({wallet:e,pool:t,card:n,index:s,list:r,lang:b}){const[p,j]=Object(a.useState)(""),[O,m]=Object(a.useState)(!1),f=Object(c.useHistory)(),h=()=>{e.connect().then((()=>{m(!0)}))},v=async()=>{let t=await Object(i.F)(e.detail.account);t.valid?Object(d.c)(e.detail.chainId,t.chainId)?(await Object(i.O)(t.chainId,e.detail.account)).success||alert(b["claim-failed"]):alert(b["please-switch-to-BSC-to-claim-deri"]):alert(b["no-deri-to-claim"])};return Object(a.useEffect)((()=>{if(t&&t.airdrop)e.isConnected()?j(Object(u.jsx)(o.a,{btnText:b.claim,click:v,lang:b})):j(Object(u.jsx)(o.a,{btnText:b["connect-wallet"],click:h,lang:b}));else{let e=`/mining/${t.version||"v1"}/${t.chainId}/${n.type}/${n.symbol}/${n.bTokenSymbol}/${t.address}`;n.bTokenId&&(e=`${e}?baseTokenId=${n.bTokenId}`),n.symbolId&&(e=e.indexOf("?")>0?`${e}&symbolId=${n.symbolId}`:`${e}?symbolId=${n.symbolId}`),j(Object(u.jsx)("button",{onClick:()=>(e=>{f.push(e)})(e),children:b.staking}))}return()=>{}}),[e.detail.account,O]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"info",children:[Object(u.jsxs)("div",{className:"top-info",children:[Object(u.jsxs)("div",{className:"pool-top",children:[Object(u.jsx)("span",{className:`logo ${n.bTokenSymbol}`}),Object(u.jsx)("span",{className:"base-token",children:n.bTokenSymbol})]}),Object(u.jsxs)("div",{className:"pool-detail",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"title",children:n.airdrop?b.total:b["pool-liq"]}),Object(u.jsx)(l.a,{value:n.liquidity,displayType:"text",thousandSeparator:!0,decimalScale:n.lpApy?7:0})]}),Object(u.jsx)("div",{className:"multiplier",children:n.multiplier&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("span",{children:b.multiplier}),Object(u.jsxs)("span",{className:"multiplier-value",title:b["multiplier-tip"],children:[n.multiplier,"x"]})]})}),Object(u.jsxs)("div",{className:"apy",children:[Object(u.jsx)("span",{children:b.apy}),Object(u.jsxs)("span",{children:[Object(u.jsx)("span",{className:n.lpApy?"sushi-apy-underline":"",title:n.lpApy&&b["deri-apy"],children:n.apy?Object(u.jsx)(l.a,{value:n.apy,suffix:"%",displayType:"text",allowZero:!0,decimalScale:2}):"--"}),n.lpApy&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("span",{children:" + "}),Object(u.jsxs)("span",{className:n.lpApy?"sushi-apy-underline":"",title:n.lpApy&&n.label,children:[" ",Object(u.jsx)(l.a,{value:n.lpApy,displayType:"text",suffix:"%",decimalScale:2})]})]})]})]})]})]}),Object(u.jsx)("div",{className:"bottom-btn",children:p})]}),s!==r.length-1&&Object(u.jsx)("div",{className:"top-line"})]})}t.a=Object(r.b)("wallet","version")(Object(r.c)((function({wallet:e,group:t={},lang:n}){const{pool:a,list:c}=t,s=p()("pool",{"only-one":1===c.length,full:5===c.length});return Object(u.jsxs)("div",{className:s,children:[Object(u.jsxs)("div",{className:"pool-header",children:[Object(u.jsxs)("div",{className:"left",children:[Object(u.jsx)("div",{className:"network",children:a.network&&a.network.toUpperCase()}),Object(u.jsxs)("div",{className:"pool-desc",children:[Object(u.jsxs)("span",{className:"symbol",children:[Object(u.jsxs)("span",{className:"symbol-label",children:[n.symbol,":"]}),Object(u.jsx)("span",{className:"symbol-value",children:a.symbol})]}),Object(u.jsxs)("span",{className:"address",children:[Object(u.jsxs)("span",{className:"address-label",children:[n.address,":"]}),a.airdrop?"--":Object(u.jsx)("a",{target:"_blank",rel:"noreferrer",href:`${j[a.chainId]&&j[a.chainId].viewUrl}/address/${a.address}`,children:a.formatAdd})]})]})]}),Object(u.jsx)("div",{className:"version",children:n[a.version]})]}),Object(u.jsx)("div",{className:"pool-info",children:c.map(((t,s)=>Object(u.jsx)(O,{card:t,index:s,pool:a,list:c,wallet:e,lang:n},s)))})]})})))},705:function(e,t,n){},706:function(e,t,n){},737:function(e,t,n){"use strict";n.r(t);var a=n(148),c=n(2),s=(n(705),n(706),n(627)),i=n(613),l=n(45),r=n(16);t.default=Object(l.b)("version","loading")(Object(l.c)((function(e){var t=e.lang,n=e.loading,l=Object(i.a)(!0),o=Object(a.a)(l,4),d=o[0],b=(o[1],o[2]),p=o[3];return Object(c.useEffect)((function(){return d?n.loaded():n.loading(),function(){}}),[d]),Object(r.jsx)("div",{className:"mining-info",children:Object(r.jsx)("div",{className:"pools",children:p.concat(b).map((function(e,n){return Object(r.jsx)(s.a,{group:e,lang:t},n)}))})})})))}}]);
//# sourceMappingURL=15.4e2f8a1a.chunk.js.map