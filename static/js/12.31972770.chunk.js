(this["webpackJsonpapp.deri.finance"]=this["webpackJsonpapp.deri.finance"]||[]).push([[12],{530:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var c=s(2),a=(s(17),s(43));function n({btnText:e,className:t,disabled:s,click:n,afterClick:i,checkApprove:l,wallet:o,spec:r}){const[d,b]=Object(c.useState)(s?"disabled":"enabled"),[p,A]=Object(c.useState)(!0),[j,O]=Object(c.useState)(!1),u=Object(c.useRef)(null),m=()=>{b("disabled"),O(!0),u.current&&(u.current.style.display="inline-block")},y=()=>{u.current&&(u.current.style.display="none"),b("enabled"),O(!1)};return Object(c.useEffect)((()=>((async()=>{if(l&&o&&o.detail.account){const e=await o.isApproved(r.pool,r.bTokenId);A(e)}})(),()=>{})),[o,r,l]),Object(a.jsxs)("button",{className:t,onClick:()=>{p?(async()=>{if("enabled"!==d)return;m(),await n()&&i&&i(),y()})():(async()=>{m(),(await o.approve(r.pool,r.bTokenId)).success?A(!0):(A(!1),alert("Approve faild")),y()})()},children:[Object(a.jsx)("span",{className:"btn-loading-wrap",children:Object(a.jsx)("span",{ref:u,className:"spinner spinner-border spinner-border-sm",style:{display:"none",marginRight:"2"}})}),j?"PENDING":p?e:"APPROVE"]})}},531:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var c=s(2),a=s(532),n=s(43);function i(e){const[t,s]=Object(c.useState)("--");return Object(c.useEffect)((()=>{const{allowZero:t,...c}=e;return(void 0!==e.value&&""!==e.value&&"NaN"!==e.value||0===(isNaN(e.value)&&Math.abs(e.value))&&!0===t)&&s(Object(n.jsx)(a.a,{...c,displayType:"text"})),()=>{}}),[e.value]),t}},547:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var c=s(2),a=s(17),n=s(140),i=s(35);const l=a.DeriEnv.get(),{chainInfo:o}=n[l];function r(e){const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)([]),[d,b]=Object(c.useState)([]),[p,A]=Object(c.useState)([]);return Object(c.useEffect)((()=>{const t=async e=>{const t=await Object(a.getPoolLiquidity)(e.chainId,e.pool,e.bTokenId)||{},s=await Object(a.getPoolInfoApy)(e.chainId,e.pool,e.bTokenId)||{},c=e.pool||"";return Object.assign(e,{network:o[e.chainId].name,liquidity:t.liquidity,apy:(100*+s.apy).toFixed(2),pool:Object(i.c)(c),address:c,type:"perpetual",buttonText:"STAKING"})};let c=Object(a.getContractAddressConfig)(l,e.current),d=Object(a.getContractAddressConfig)(l,"v1");c=c.reduce(((e,t)=>{const s=e.findIndex((e=>e.bTokenSymbol===t.bTokenSymbol));return s>-1&&-1===e[s].symbol.indexOf(t.symbol)?e[s].symbol+=`,${t.symbol}`:e.push(t),e}),[]),c=e.isV2?c.map(t):d.map(t);const p=Object(a.getLpContractAddressConfig)(l).map((async e=>{const t=await Object(a.getPoolLiquidity)(e.chainId,e.pool)||{},s=await Object(a.getPoolInfoApy)(e.chainId,e.pool)||{},c=e.pool||"";let n,l;if(Object(i.g)(e.pool)){n=(100*+(await Object(a.getLpPoolInfoApy)(e.chainId,e.pool)).apy2).toFixed(2)}return Object(i.h)(e.pool)&&(l="SUSHI-APY"),Object(i.f)(e.pool)&&(l="CAKE-APY"),Object.assign(e,{network:o[e.chainId].name,liquidity:t.liquidity,apy:(100*+s.apy).toFixed(2),pool:Object(i.c)(c),lpApy:n,address:c,type:"lp",label:l,buttonText:"STAKING"})})),j=c.concat(p);return Promise.all(j).then((e=>{const t=e.filter((e=>"v1"===e.version||!e.version)),c=e.filter((e=>"v2"===e.version));A(c),b(t),r(e),s(!0)})),()=>n.length=0}),[e.current]),[t,n,d,p]}},553:function(e,t,s){"use strict";var c=s(2),a=s(23),n=s(140),i=s(17),l=s(531),o=s(138),r=s(530),d=(s(35),s(43));const b=n[i.DeriEnv.get()].chainInfo;t.a=Object(o.b)("wallet","version")(Object(o.c)((function({wallet:e,version:t,pool:s}){const[n,o]=Object(c.useState)(""),p=`logo ${s.bTokenSymbol}`,A=Object(a.g)(),j=()=>{e.connect()},O=async()=>{let t=await Object(i.getUserInfoAllForAirDrop)(e.detail.account);t.valid?e.detail.chainId==t.chainId?(await Object(i.mintAirdrop)(t.chainId,e.detail.account)).success||alert("Claim failed"):alert("Please switch to BSC to claim DERI"):alert("No DERI to claim")};return Object(c.useEffect)((()=>{if(s&&s.airdrop)e.isConnected()?o(Object(d.jsx)(r.a,{btnText:"CLAIM",click:O})):o(Object(d.jsx)(r.a,{btnText:"Connect Wallet",click:j}));else{let e=`/mining/${s.version||"v1"}/${s.chainId}/${s.type}/${s.symbol}/${s.bTokenSymbol}/${s.address}`;s.bTokenId&&(e=`${e}?baseTokenId=${s.bTokenId}`),s.symbolId&&(e=e.indexOf("?")>0?`${e}&symbolId=${s.symbolId}`:`${e}?symbolId=${s.symbolId}`),o(Object(d.jsx)("button",{onClick:()=>(e=>{A.push(e)})(e),children:"STAKING"}))}return()=>{}}),[s]),Object(d.jsxs)("div",{className:"pool",children:[Object(d.jsxs)("div",{className:"pool-header",children:[Object(d.jsx)("div",{className:"network",children:s.network&&s.network.toUpperCase()}),Object(d.jsxs)("div",{className:"pool-label",children:[t.isV2&&"v1"===s.version&&Object(d.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAUCAYAAAAHpoRMAAAACXBIWXMAAAsSAAALEgHS3X78AAACpUlEQVRIicVWT2jTYBx9k4ZlLYhQb3aXFdZO8NCAG7RSVukOOmUwkLmDCN4UPSxF0PZeCqMZHmoOwi6evEgr4k2PTpeTUDrbyURaL8UU7GT1DzTyyS/lW0zabFZ98BGatvm99773+30ZMQwD/wspWfYCCAAYB1D3/AseKVlmxfxU1E9rkr6uAegwMkNzhlN5nCtmFtZp1flrXlF0/hmDyLyg61mLyjEAIbPYbCKRiEajM51O58OaoqxTMbb28opSo78mAeQA3ACwaVfMloyp8m46nfP5fKdKxeIzTdM+kfJ9KuPx+Pfz8/NZQRB+ALgC4KPlcScAZABMA2jzwqzwpGSZqYtylprKG9Vq9YskSYhEIm1N0x5xKnk8JKfWLESS3GrTPVtHTHjI7jFS+9Kyl0zNyVA47HcgkgYwBeAxLRNXAcwA2AKwQJ8X+5FhprgJ8G+5ISwSmS3ann4ose16t719WVXVI+S+1xLyp25a+y05NM0pYzm4SfbfsVHZa+VYLHY6OTcnNZvNjqqqt6mVzdw9p51g+YMbMq+JyBRHJmcYxrH3OzvrhUIhDEByaOXaZCg0Kori50AgcC+vKA/6FRpIplKptILBoFdvtZbyq6sjS8vLC8GJiTPlcrn2pFQapczVrSo5nAPwFcCbQbV+ZcZhYJn39HQmc0kQhG+vNjbU2UTierfb3RRF8ZoLV48CKALYpSD3JyOvrFwEcIEfyzYD6z43J3YpsO0BzwYXctZpWVfOuABrzVv0M8cJaoM0EcryrZ+SZdP5cW6u1f7aqU3DlD8c+UOywZznOotN98Yfk3FQyZ/IZmdVWQxsAt6DKzKW9w6ryl4bk1pWrJFXlL2DCttHxsV7h255BXBUeRiwbopSNw1V5WHAhh7by/qwVR4YAH4C104ah/PdWdoAAAAASUVORK5CYII=",alt:"v1"}),t.isV2&&"v2"===s.version&&Object(d.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAUCAYAAAAHpoRMAAAACXBIWXMAAAsSAAALEgHS3X78AAACuUlEQVRIicVWS2gTURQ9hcTEBAtpstOsGtoaKZhAKswiJkUIWkUtSOmiCO78LTrpIqYLd6VQEgkSBReRkpUbm/hbVVdCtQNuAqMZpC7S7hKRGBNKICNP7pRnkmlGbe2Bx4Nh5t577j3nvelTVRUHhago2gAcA+AGUDL9jzqiosiSHQYwDMBJS3umAGiwYvasMxxLFyUbAqA9q9Aq8XsimazwMXoV84b28d1YhsLhsCAIp37UalupVOoRSxaJREyBQOCsY2DAz8VbB/AewHK3ZLrFREVx6E48vmi320fzudwrSZLKxLJBzNhqBIPBb+cmJhbMZnMTwAyALQCTAOIAPgJYoJ1hEcAZAPe7FWSKiiJjJxBbNzfLzWKxWPP7/fD5fFVJkp4kkkmlS91Zev8eFcJwC0AVwE3aNcQA5AFc7VoMl5wxft42yzEA3uGREadOIYz9cQBPaWkYp4TVLt8c0ZmEzYiAO3RD4Ecx0ysIQ7PZTKiqGlEU5eXjTOYtiVxz1wsj1v5EHRojATIc5UYR68LSzdnX6fV6vadDoUsOh8Mhy/JqbmVF09BrmgTTX083gdp9u010WVVVT3zZ2Mik0+kPnJU1ljtWjs7NXXa5XKNQVfmQxXKXE3MHenZGluWvHo/HWq5UphJLS31T09MXPYODQqFQ+Pwsn7cAOEnOYizrnLYmqXv9AJb07MzjV2d6HVjx+fkrZrN5+93a2sNQOHy91WqtW63Wazox+8nC2lhjOkLuLEacnb0A4DyzctspWeZYPqDgLOh3Eqxegiw5bJlGaxhGrwNNNww3OCHv9p4eVqOimKHO8+easm+3Nh2mO47idl7gijYFNpl/LqbdxpzmwCXjL8eSXixDxbT9d9h0bMwS1ynpZiKZrP8psd+K2UuWfwPmJoHc5DT637FfYIdesc3GBwMAPwHwfCc5wAJXPgAAAABJRU5ErkJggg==",alt:"v2"})]})]}),Object(d.jsx)("div",{className:"pool-info",children:Object(d.jsxs)("div",{className:"info-center",children:[Object(d.jsxs)("div",{className:"top-info",children:[Object(d.jsx)("div",{className:p}),Object(d.jsxs)("div",{className:"pool-detail",children:[Object(d.jsx)("div",{className:"base-token",children:s.bTokenSymbol}),Object(d.jsxs)("div",{children:[Object(d.jsx)("span",{children:s.airdrop?"Total":"Pool Liq"}),Object(d.jsx)(l.a,{value:s.liquidity,displayType:"text",thousandSeparator:!0,decimalScale:s.lpApy?7:0})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("span",{children:"Symbol"}),s.symbol]}),Object(d.jsxs)("div",{className:"apy",children:[Object(d.jsx)("span",{children:"APY"}),Object(d.jsxs)("span",{children:[Object(d.jsx)("span",{className:s.lpApy?"sushi-apy-underline":"",title:s.lpApy&&"DERI-APY",children:s.apy?Object(d.jsx)(l.a,{value:s.apy,suffix:"%",displayType:"text",allowZero:!0,decimalScale:2}):"--"}),s.lpApy&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("span",{children:" + "}),Object(d.jsxs)("span",{className:s.lpApy?"sushi-apy-underline":"",title:s.lpApy&&s.label,children:[" ",Object(d.jsx)(l.a,{value:s.lpApy,displayType:"text",suffix:"%",decimalScale:2})]})]})]})]}),Object(d.jsxs)("div",{className:"pool-address",children:[Object(d.jsx)("span",{children:"Address"}),s.airdrop?"--":Object(d.jsx)("a",{target:"_blank",rel:"noreferrer",href:`${b[s.chainId].viewUrl}/address/${s.address||s.pool}`,children:s.pool})]})]})]}),Object(d.jsx)("div",{className:"bottom-btn",children:n})]})})]})})))},589:function(e,t,s){},596:function(e,t,s){"use strict";s.r(t);s(2),s(589);var c=s(553),a=s(547),n=s(138),i=s(43);t.default=Object(n.b)("version")(Object(n.c)((function({version:e}){const[t,s]=Object(a.a)(e);return Object(i.jsx)("div",{className:"mining-info",children:Object(i.jsxs)("div",{className:"pools",children:[s.map(((e,t)=>Object(i.jsx)(c.a,{pool:e},t))),!t&&Object(i.jsx)("div",{className:"loading",children:Object(i.jsx)("span",{className:"spinner spinner-border spinner-border-sm"})})]})})})))}}]);
//# sourceMappingURL=12.31972770.chunk.js.map